{% extends 'core/base.html' %}

{% block extra_head %}
  <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/alpinejs/2.3.0/alpine.js" integrity="sha512-nIwdJlD5/vHj23CbO2iHCXtsqzdTTx3e3uAmpTm4x2Y8xCIFyWu4cSIV8GaGe2UNVq86/1h9EgUZy7tn243qdA==" crossorigin="anonymous"></script>
  {% include 'ingest/partials/review_header.html' %}
{% endblock %}

{% block content %}
  <div class="flex justify-between">
    <nav class="flex" aria-label="Breadcrumb">
      <ol class="flex items-center space-x-4">
        <li>
          <div>
            <a href="/" class="text-gray-400 hover:text-gray-500">
              <!-- Heroicon name: solid/home -->
              <svg class="flex-shrink-0 h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z" />
              </svg>
              <span class="sr-only">Home</span>
            </a>
          </div>
        </li>

        {% for breadcrumb in breadcrumbs %}
          <li>
            <div class="flex items-center">
              <!-- Heroicon name: solid/chevron-right -->
              <svg class="flex-shrink-0 h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
              </svg>
              <a href="{{ breadcrumb.0 }}" class="ml-4 text-sm font-medium text-gray-500 hover:text-gray-700">{{ breadcrumb.1 }}</a>
            </div>
          </li>
        {% endfor %}
      </ol>
    </nav>

    {% include 'studies/partials/pagination.html' %}
  </div>

  <div class="mb-4" x-data="thumbnailGrid();">
    <div class="flex flex-row justify-end pb-3">
      <a class="px-1" href="#" @click="increase();">show more</a> |
      <a class="px-1" href="#" @click="decrease();">show less</a>
    </div>
    <div class="grid gap-4" :class="`grid-cols-${numCols}`">
      {% for accession in page_obj %}
        {% include 'ingest/partials/accession.html' %}
      {% endfor %}
    </div>
  </div>

  {% include 'studies/partials/pagination.html' %}

  <script type="text/javascript">
    function thumbnailGrid() {
      // allow between 4-6 columns
      return {
        numCols: localStorage.getItem('numCols') || 6,
        increase() {
          this.numCols = Math.min(6, this.numCols + 1);
          localStorage.setItem('numCols', this.numCols);
        },
        decrease() {
          this.numCols = Math.max(4, this.numCols - 1);
          localStorage.setItem('numCols', this.numCols);
        }
      }
    }
  </script>
{% endblock %}
