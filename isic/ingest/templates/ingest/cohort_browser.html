{% extends 'core/base.html' %}
{% load humanize %}
{% load get_key %}

{% block head_extra %}
  {{ block.super }}
  {% include 'ingest/partials/review_header.html' %}
{% endblock %}

{% block content %}
  {% include 'ingest/partials/breadcrumbs.html' %}
  {% include 'ingest/partials/cohort_details.html' %}

  <div class="my-4 bg-gray-50 p-2 rounded-sm border-gray-200 border">
    <form method="get">
      {{ form.non_field_errors }}

      <div class="flex justify-between">
        <div class="flex flex-col">
          <div>
            {{ filter.form.quality_check.label }}
            {{ filter.form.quality_check }}
          </div>
          <div>
            {{ filter.form.phi_check.label }}
            {{ filter.form.phi_check  }}
          </div>
          <div>
            {{ filter.form.diagnosis_check.label }}
            {{ filter.form.diagnosis_check  }}
          </div>
          <div>
            {{ filter.form.duplicate_check.label }}
            {{ filter.form.duplicate_check  }}
          </div>
          <div>
            {{ filter.form.lesion_check.label }}
            {{ filter.form.lesion_check  }}
          </div>
        </div>

        <div>
          <div>
            {{ filter.form.status.label }}
            {{ filter.form.status }}
          </div>
          <div>
            {{ filter.form.published.label }}
            {{ filter.form.published }}
          </div>
        </div>
      </div>

      <button type="submit" class="btn btn-primary">
        <span>Search</span>
      </button>
    </form>
  </div>

  <div class="flex justify-between">
    Showing {{ accessions.paginator.count|intcomma }} results
    {% include 'studies/partials/pagination.html' with page_obj=accessions %}
  </div>

  <div class="mb-4" x-data="thumbnailGrid();">
    <div class="flex flex-row justify-end pb-3">
      <a class="px-1" href="#" @click="decrease();">fewer columns</a> |
      <a class="px-1" href="#" @click="increase();">more columns</a>
    </div>
    <div class="grid gap-4" :class="`grid-cols-${numCols}`">
      {% for accession in accessions %}
        {% include 'ingest/partials/accession.html' %}
      {% endfor %}
    </div>
  </div>

  {% include 'studies/partials/pagination.html' with page_obj=accessions %}

  {% include 'ingest/partials/thumbnail_grid_js.html' %}
{% endblock %}
