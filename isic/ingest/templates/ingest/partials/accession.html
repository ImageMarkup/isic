{% load get_key %}
{% load accession %}

{{ accession|to_js|json_script:accession.id }}
<div class="col accession-col" x-data="accession('{{ accession.id }}');">
  {% if accession.status != 'skipped' %}
    {% if debug %}
      <img src="https://picsum.photos/seed/{{accession.id}}/300" class="materialboxed">
    {% else %}
      <img src="{{ accession.blob.url }}" class="materialboxed" width="300" height="300" title="{{ accession.blob_name }}" />
    {% endif %}
  {% else  %}
    <img src="https://via.placeholder.com/300x300.png?text={{ accession.blob_name }}" />
  {% endif %}
  <div>
    {{ accession.metadata.age|default:"-" }} /
    {{ accession.metadata.sex|default:"-" }} /
    {{ accession.metadata.diagnosis|default:"-" }}
    {% if title == 'Lesion Review' %} / {{ accession.metadata.lesion_id }}{% endif %}
  </div>
  <div>
    {% for key, label in buttons.reject.items %}
      <a :class="{ 'dim': {{ key }} === null || {{ key }} !== false }"
        class="waves-effect waves-light btn-small red review-button"
        @click="reject('{{ key }}')"
      >{{ label }}</a>
    {% endfor %}

    {% for key, label in buttons.accept.items %}
      <a :class="{ 'dim': {{ key }}  === null || {{ key }} !== true }"
        class="waves-effect waves-light btn-small green review-button"
        @click="accept('{{ key }}')"
      >{{ label }}</a>
    {% endfor %}
  </div>
</div>
