{% load get_key %}
{% load accession %}

<div>
  <div x-data="{ open: false, hovered: false }" class="pb-4">
    <a class="cursor-pointer">
      {% if debug %}
        <img @mouseenter="hovered = true" @click="open = true" src="https://picsum.photos/seed/{{image.id}}/256">
      {% else %}
        <img @mouseenter="hovered = true" @click="open = true" src="{{ image.accession.thumbnail_256.url }}" title="{{ image.accession.blob_name }}" />
      {% endif %}
    </a>

    <template x-if="true">
      <div x-show="open">
        {% include 'core/partials/image_modal.html' %}
      </div>
    </template>
  </div>
  <div class="flex">
    {% if request.user.is_staff %}
      <a href="{{image.get_absolute_url}}">{{image.isic_id}}</a>
    {% else %}
      {{ image.isic_id }}
    {% endif %}

    <a href="{{ image.accession.blob.url }}">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"></path>
      </svg>
    </a>
  </div>
</div>
